# c

单片机的C语言基本数据类型:

数据类型|关键字|所占位数|表示范围
--|--|--|--
无符号类型|unsigned char|8|0-255
有符号类型|char|8|-128-127
无符号整型|unsigned int|16|0-65535
有符号整型|int|16|-32768-32767
无符号长整型|unsigned long|32|
有符号长整型|long|32|
单精度浮点型|float|32|
双精度浮点型|double|64|

注意单片机的位数是16位, 而我们的电脑是一般是32位和64位.



类别|运算符|描述
--|--|--
算术|+|加
算术|-|减
算术|*|乘
算术|/|除
算术|*|余
条件|>|大于
条件|>=|大于等于
条件|<|小于
条件|<=|小于等于
条件|==|等于
条件|!=|不等于
逻辑|&&|与
逻辑|\|\||或
逻辑|!|非
位运算|<<|按位左移
位运算|>>|安位右移
位运算|&|按位与
位运算|\||按位或
位运算|^|按位异或
位运算|~|按位取反


在单片机中, 经常使用位运算
按位左移: `0011 1100 << 1 = 0111 1000` 高位移出去, 低位补0
按位右移: `0011 1100 >> 1 = 0011 1100` 低位移出去, 高位补0
按位与: `0001 1000 & 0010 1010 = 0000 1000` 只有都是1时, 才是1
按位或: `0001 1000 | 0010 1010 = 0011 1010` 只要有一个是1, 就是1
按位异或: `0001 1000 ^ 0010 1010 = 0011 0010` 不一样是1, 一样是0
按位取反: `~0001 1000 = 1110 0111` 0变成1 1变成0

## 流程控制

### if
```C
if(逻辑表达式)
{
    语句体1;
}
else
{
    语句体2;
}

```

### while
```c
while(逻辑表达式)
{
    循环体;
}
```

### switch
```c
switch(变量)
{
    case 常量1:语句体1;break;
    case 常量2:语句体2;break;
    (...)
    default:语句体x;break;
}

```


### for

```c
for(初始化;逻辑表达式;更改条件)
{
    循环体;
}
```


## 数组

数组：把相同类型的一系列数据统一编制到某一个组
```c
int x[3];			//定义一组变量（3个）
int x[]={1,2,3};	//定义一组变量并初始化

x[0] 		//引用数组的第0个变量
x[1] 		//引用数组的第1个变量
x[2]			//引用数组的第2个变量
```
引用x[3]时，数组越界，读出的数值不确定，应避免这种操作


## 模块化编程
模块化编程：把各个模块的代码放在不同的.c文件里，在.h文件里提供外部可调用函数的声明，其它.c文件想使用其中的代码时，只需要#include "XXX.h"文件即可。使用模块化编程可极大的提高代码的可阅读性、可维护性、可移植性等

.c文件：函数、变量的定义
.h文件：可被外部调用的函数、变量的声明

任何自定义的变量、函数在调用前必须有定义或声明（同一个.c）
使用到的自定义函数的.c文件必须添加到工程参与编译
使用到的.h文件必须要放在编译器可寻找到的地方（工程文件夹根目录、安装目录、自定义）

### 预编译

C语言的预编译以#开头，作用是在真正的编译开始之前，对代码做一些处理（预编译）

`#include <REGX52.H>` 把REGX52.H文件的内容搬到此处
`#define PI 3.14` 定义PI，将PI替换为3.14
`#define ABC` 定义ABC
`#ifndef __XX_H__` 如果没有定义__XX_H__
`#endif` 与#ifndef,#if匹配，组成“括号”

此外还有`#ifdef`,`#if`,`#else`,`#elif`,`#undef`等

```c
#define AAA  // 定义AAA
#ifdef AAA  //如果定义了AAA, xxx才参与编译
xxx
#endif

```

### 样例
1. `Delay.c` 函数体
```c
void Delay(unsigned int xms)
{
    unsigned char i, j;
    while(xms--)
    {
        i = 2;
        j = 239;
        do
        {
            while (--j);
        } while (--i);
    }
}
```

2. `Delay.h` 函数声明文件
```c
#ifndef __DELAY_H__
#define __DELAY_H__

void Delay(unsigned int xms);

#endif

```

3. `main.c` 主程序入口

```c
#include "Delay.h"


void main()
{
    Delay(10);
}
```