# 节点编辑器


## 节点编辑器分类

|图标|名称|描述|
|----|----|----|
|![alt text](./节点编辑器/geometry.png)|几何节点|用于程序化建模。|
|![alt text](./节点编辑器/material.png)|着色器节点|用于为物体创建材质。|
|![alt text](./节点编辑器/render-layers.png)|合成节点|用于编辑已渲染的图像。|
|![alt text](./节点编辑器/texture.png)|纹理节点|用于创建自定义纹理。|



## 编辑器界面(Editor Interface)

1. 标题栏(Header): 包含一系列的菜单、按钮和选项，部分是基于当前节点树类型而定的
    1. 视图(view): 更改编辑器的视图
    2. 选择(Select): 选择节点
    3. 添加(Add, Shift-A): 添加节点
    4. 节点(Node): 操作选择的节点
    5. 使用节点(Use Nodes): 当渲染引擎计算材质色和渲染最终图时，确定是否使用节点树。如果不勾选，将忽略节点材质。
    6. 钉住(Pin): 
    7. 吸附(Snapping): 更改吸附节点位置的选项以实现更清晰的节点树布局
    8. 叠加层(Overlays): 叠加层是显示在节点和节点树上面的信息
    9. 线路颜色(Wire Colors): 根据其连接的接口类型给节点线路着色。
    10. 转接点自动标签(Reroute Auto Labels): ❤️
    11. 上下文路径(Context Path): 在左上角显示面包屑导航来指示正在显示的 节点（树/组）层次结构的位置
    12. 标注(Annotations): 在预览区域中显示标注。
2. 工具栏(Toolbar): 在节点编辑器中使用的工具
3. 侧栏(Sidebar): 当前选中节点的，以及节点编辑器特定设置的属性
4. 导航(Navigating): 使用鼠标移动和键盘快捷键完成节点编辑器导航。
    1. 平移 鼠标中键
    2. 缩放视图 Ctrl-鼠标中键, 滚轮
    3. 框显所选 数字键盘句号
    4. 框显全部 Home


## 节点部件(Node Parts)

部件包括标题、接口、属性等。

1. 标题(Title): 显示了节点的名称或类型；它可以通过改变节点的标签来覆盖
2. 预览(Preview): 使用节点右上角标题旁边的眼睛图标来切换支持预览的节点。并非所有节点都支持预览。

### 插口(Sockets)

插口是节点的输入和输出值。它们以小彩圈的形式出现在节点的两侧。未使用的插口可以用 Ctrl-H 来隐藏。每个插口都根据其处理的数据类型不同而显示不同的颜色。

1. 内置(Built-in)
    1. 着色器（鲜绿色）(Shader (bright green))
    2. 几何信息（绿松石色）(Geometry (turquoise))
2. 数据(Data)
    1. 布尔值（亮粉色）(Boolean (light pink))
    2. 颜色（黄色）(Color (yellow))
    3. 浮点数（灰色）(Float (gray))
    4. 整数（石灰绿色）(Integer (lime green))
    5. 字符串（浅蓝色）(String (light blue))
    6. 矢量（深蓝色）(Vector (dark blue))
    7. 旋转（粉色）(Rotation (pink))
    8. 矩阵（深粉色）(Matrix (dark pink))
3. 数据块(Data-Blocks)
    1. 集合（白色）(Collection (white))
    2. 物体（橙色）(Object (orange))
    3. 材质（肉色）(Material (salmon))
    4. 纹理（粉色）(Texture (pink))
    5. 图像（杏色）(Image (apricot))
4. 输入(Input): 输入位于节点的左下方，提供了节点所需的数据以执行其功能。每个输入插口，除了绿色着色器输入，当断开连接时，都有一个默认值，可以通过颜色、数字或矢量接口输入进行编辑。
5. 输出(Output): 输出位于节点的右上方，可以连接到节点树下更多的节点的输入
6. 转换(Conversion): 一些插口类型可以隐式或显式地转换为其他类型。隐式转换是自动发生的，不需要转换节点。例如，浮点数接口和颜色接口可以相互连接。

### 属性(Properties)



## 节点选择

1. 全部 A：选择全部节点。
2. 无 Alt-A：取消选择全部节点。
3. 反转 Ctrl-I：反转当前的选择。
4. 框选 B：请参阅框选。
5. 刷选：请参阅刷选。
6. 套索选择：请参阅套索选择。
7. 选择连接自 L：将选择范围扩展到连接到当前所选节点输入的节点。
8. 选择连接到 Shift-L：将选择范围扩展到连接到当前所选节点输出的节点。
9. 按组选择 Shift-G：选择具有类似属性的节点作为活动节点。
   - 类型：节点类型。例如所有数学运算节点。
   - 颜色：节点的颜色。（节点可以被赋予一个自定义的颜色，以便在编辑器中对它们进行视觉组织；这与它们可能消耗或产生的任何颜色信息无关，因为它们是其功能的一部分。颜色可以在侧栏中设置。）
   - 前缀、后缀：与文本的开始/结尾匹配名称属性。
10. 激活相同类型上一个/下一个 Shift-]/Shift-[：找到相同类型的上一个/下一个节点，激活它，并确保它是可见的。
11. 查找节点 Ctrl-F：显示一个可以通过名称来搜索节点的弹出菜单。
12. 多选 Shift-鼠标左键：从/向选中项中添加或移除节点。


## 节点排列(Arranging Nodes)

1. 吸附(Snapping): 打开吸铁磁按钮, 或者在移动时按Ctrl
2. 自动偏移(Auto-Offset)


## 节点编辑

1. 变换(Transform):
    1. 菜单: 节点 ‣ 移动, 旋转, 缩放
    2. 快捷键: G, R, S
2. 连接插口(Connecting Sockets)
    1. 左键点击并拖动
    2. 生成连接 F: 使用打开的接口选择多个节点，然后使用“生成连接”在它们之间创建连接
    3. 生成并替换连接 Shift-F: 将替换现有连接
3. 切断连接(Disconnecting Sockets)
    1. 菜单: 节点 ‣ 切断连接
    2. 快捷键: Ctrl-鼠标右键
    3. 脱离连接 Alt-鼠标左键 拖动: 断开附着到所选节点的所有连接，并将节点移动到一个新的位置。
4. 复制/粘贴(Copy/Paste)
    1. 菜单: 节点 ‣ 复制，节点 ‣ 粘贴
    2. 快捷键: Ctrl-C, Ctrl-V
5. 复制(Duplicate)
    1. 菜单: 节点 ‣ 复制
    2. 快捷键: Shift-D
6. 关联复制(Duplicate Linked)
    1. 菜单: 节点 ‣ 关联复制❤️
    2. 快捷键: Alt-D
7. 删除(Delete)
    1. 删除 X, Delete
    2. 删除并重连 Ctrl-X: 删除选定的节点，然后创建新的连接，将其以前的输入点连接到以前的输出点。
8. 静默(Mute)
    1. 菜单: 节点 ‣ 禁用/启用节点
    2. 快捷键: M
9. 显示/隐藏(Show/Hide)
    1. 隐藏 H
    2. 切换节点预览 Shift-H: 可以点击节点标题上的材质球图标切换。
    3. 显示/隐藏节点接口 Ctrl-H: 当节点未连接时，折叠/展开全部输入和输入插口。
    4. 切换节点选项: 显示/隐藏全部节点属性
    5. 折叠并隐藏未使用的接口: 同时应用 切换隐藏节点接口 和 隐藏 操作
10. 层(Layers)
    1.  读取渲染层 Ctrl-R: 从缓存中读取当前场景的所有渲染层。这可以用来在渲染时节省内存，因为渲染层不需要保存在内存中。
11. 连接到输出端(Connect to Output)
    1.  快捷键: Shift-Alt-鼠标左键

## 侧栏(Sidebar)

1. 节点(Node)面板: 侧栏 ‣ 节点
    1. 节点(Node):
        1. 名称(Name): 唯一标识
        2. 标签(Label): 赋予标题
        3. 警告传播(Warning Propagation): 控制此节点中的哪些警告将传播到父节点组或修改器。此功能仅适用于几何节点。
    2. 颜色(Color):
    3. 属性(Properties)
2. 工具(Tool)面板: 侧栏 ‣ 工具
3. 视图(View)面板: 侧栏 ‣ 视图


## 节点组(Node Groups)

节点组允许你把一 组 节点当作是一个节点。它们类似于编程中的函数：它们可以被重复使用（甚至在不同的节点树中），并且可以通过改变它们的 "参数" 进行定制. 群组(Group)面板: 侧栏 ‣ 群组


1. 群组(Group)面板: 侧栏 ‣ 群组 ‣ 群组
    1. 名称(Name): 节点名称
    2. 描述(Description): 光标悬停在标题上或添加菜单中时显示的信息
    3. 颜色标签(Color Tag): 影响标题栏颜色的节点组的颜色标签
    4. 节点宽度(Node Width): 新创建的组节点的宽度
2. 用法(Usage): 仅在几何节点编辑器
    1. 修饰键(Modifier):
    2. 工具(Tool)
3. 群组插槽(Group Sockets)面板: 侧栏 ‣ 群组 ‣ 群组接口

    该面板用于添加、删除、重新排序和编辑节点组的输入/输出接口。
    1. 接口列表(Socket List): 所有输入、输出和面板的列表视图
    2. 描述(Description):  鼠标悬停在接口属性上时显示的信息
    3. 默认关闭(Closed by Default): 面板在新节点上默认关闭
    4. 默认(Default): 当没有任何东西连接到接口时使用的值
    5. 最小值，最大值(Min, Max): 节点界面中显示的 UI 按钮的最小和最大值。
4. 建立组(Make Group)
    1. 菜单: 节点 ‣ 创建组
    2. 快捷键: Ctrl-G
5. 插入到组(Insert Into Group)
    1. 菜单: 节点 ‣ 插入到组
6. 编辑组(Edit Group)
    1. 菜单: 节点 ‣ 编辑组
    2. 标题栏: 进入父级节点树
    3. 快捷键: Tab, Ctrl-Tab
7. 解散组(Ungroup)
    1. 菜单: 节点 ‣ 解散组
    2. 快捷键: Ctrl-Alt-G
    3. 分离 P: 将所选节点从节点组分离
8. 重复使用节点组(Reusing Node Groups)
    1. 菜单: 添加 ‣ 组
    2. 快捷键: Shift-A

## 节点框(Frame Node)

节点框对于组织节点很有用，它把相关的节点集合在一个共同的区域。

1. 属性(Properties)
    1. 标签大小(Label Size): 标签的字体大小
    2. 收缩(Shrink): 一旦节点被放置在框中，框就会缩小，从而消除浪费的空间。此时，不再可能抓取框的边缘来调整其大小，而是重新排列框内的节点来调整大小。
    3. 文本(Text): 当需要显示更全面的文本时，框节点可以显示文本块的内容。
2. 编辑(Editing): 创建一个框入选中节点的框
    1. 并入新框(Join in New Frame): 
        1. 菜单: 节点 ‣ 并入新框
        2. 快捷键: Ctrl-J
    2. 添加到框(Add to Frame): 将它们拖放到框上或通过选择节点然后选择框，并使用 Ctrl-P 来添加节点到框上。
        1. 快捷键: Ctrl-P
    3. 从框中移除(Remove from Frame):
        1. 菜单: 节点 ‣ 从框中移除
        2. 快捷键: Alt-P


## 转接点(Reroute Node)

转接点的外观和行为很像其他节点上的接口，因为它支持一个输入连接，同时允许多个输出连接。鼠标滑过连接时，同时按住 Shift 和 鼠标右键，添加一个 转接点。
