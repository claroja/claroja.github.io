为了保证系统设计的质量，在系统架构设计过程中我们对系统的架构设计做了评估。软件架构评估是在对架构分析、评估的基础上，对架构策略的选取进行决策。常用的架构评估方式包括基于调查问卷或检查表的方式、基于场景的方式和基于度量的方式等，我们一般使用基于场景的方式。而基于场景的方式又常见有ATAM、SAAM、CBAM三种架构评估方法，详细介绍如下：
1、ATAM方法，即“架构权衡分析法”。目标是在考虑多个相互影响的质量属性的情况下，从原则上提供一种理解软件架构的能力的方法。主要针对可修改性、安全性、性能和可用性等质量属性。在系统开发之前，对这些质量属性进行评价和折中。
2、SAAM方法，即“基于场景的架构分析方法”。目标是对描述应用程序属性的文档，验证基本的架构假设和原则。早期主要针对可修改性，后来也证明可用于其他的质量属性如可移植性、可扩充性等。评估过程包括5个步骤：场景开发、架构描述、单个场景评估、场景交互和总体评估。

3、CBAM方法，即“成本收益分析方法”。CBAM可以看作是ATAM的补充，在ATAM评估结果的基础上对架构的经济性进行评估。评估过程包括整理场景、对场景进行细化、确定场景的优先级、分配效用等7个步骤。

在项目实践中，我们发现质量属性和目标常常是互相关联的，需要权衡多个质量目标，而架构的设计决策一旦确定下来就会影响整个软件生命周期，并且在软件实现后再改变这些决策成本高昂。因此，我们最终选择了使用ATAM方法对架构设计进行评估。具体实施过程如下。

一、组建评估团队。项目经理老张和我邀请了建设方信息中心主任、5名外部技术专家、3名开发人员和2名用户代表一起组建了评估团队，由5名外部技术专家组成评估小组，并在其中推选了一位经验丰富的专家作为评估小组组长。在正式评估活动开始前先开了个启动会，我详细讲解了我们的评估方法，确认大家都明白如何开展评估活动。

二、场景和需求收集。我们阅读了需求规格说明书，也请建设方信息中心主任作了讲解，包括系统的关键功能、限制、业务目标和主要质量属性目标等，使参加评估的人员都理解了本系统。

三、架构视图和场景实现。我向评估团队描述了本系统的21个重要质量场景，包括教务子系统在主服务器出错之后在1分钟之内切换到备用服务器、学工子系统同时在线并发访问的用户达1万人、智慧实训室课件播放并发流量达2Gbps、办公子系统可抵御99%以上的攻击等，以及我对各个质量场景所做的架构设计，通过包括逻辑视图、进程视图、开发视图、物理视图和场景在内的4+1架构视图进行展示解说。

四、属性模型构造和分析。评估团队对各个架构进行分类并命名，记录每种架构对不同质量属性的影响，生成质量属性效用树。在这里我们通过讨论分析场景是否已足够，对场景的重要度和实现难易度进行投票。专家组成的评估小组重点分析重要和难实现的场景，我对评估小组的询问一一做出解释。评估团队逐个识别风险点、非风险点、敏感点和权衡点。由于用户的参与，在原有的场景之外又补充了两个场景：一是教师和学生在线聊的实时性；二是消费记录的可追踪性。

五、折中。由于不同架构对质量场景和质量属性的响应不一样，有的甚至还产生冲突，需要在性能、可用性、安全性和可修改性四个维度对各个架构之间做出考察和折中。例如一位专家提出采用SOA架构提高了系统的可修改性，但会导致数据多次传输和转换，性能较低，容易形成单点故障而降低可用性，因此建议采用微服务架构；另一位专家则指出微服务架构虽然减少了单次调用的开销，但是服务分割太细会产生长调用链，不但性能下降，而且问题定位困难，可修改性也差。最终评审结果同意了采用SOA架构。

六、生成评估报告，并根据评估报告进行架构变更。评估小组根据会议的结果编制了架构评估报告，包括以质量属性场景表表示的带优先级的质量属性需求、质量效用树、一系列风险点和非风险点、敏感点、权衡点、采用的架构和理由等。由于我在设计架构时充分考虑了架构变化的需求，做了可变性架构设计，经过两次迭代之后即通过了评估。

经过6个月紧张的开发测试工作，所有的子系统均于2021年11月底前上线并通过业主方的正式验收，项目圆满完成。通过本项目建设，实现了三校合并后原有的办公子系统、教务子系统、学工子系统、招生子系统等的融合改造，方便了教职工和学生的学习和生活；建设了4间智慧实训室，提供智慧、互动式、情景化、沉浸式的课程教学学习体验，可以定制基于企业工作业务与流程的实战课程，实现精准育人目标，获得各方一致好评。这得益于我们在系统中采用ATAM方法进行了架构评估，因而提前避免了一些架构设计上的风险隐患，既加快了设计开发的进度，又保障了系统的交付质量和使用效果。但在系统安装部署时安装工程师擅自把旧服务器进行了虚拟化并入生产环境，造成了部分子系统不稳定的故障，查找出故障原因并整改花费了一周时间，幸好并未对工期造成影响。技术学无止境，我需要永远虚心学习、不断改革进步。














