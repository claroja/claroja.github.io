
# 函数依赖

## 最佳实践

### 题目总结

1. 💚设关系模式R(U,F)，其中U为属性集，F是U上的一组函数依赖，那么函数依赖的公理系统(Armstrong公理系统)中的合并规则是指(  )为F所蕴涵。

    - A. 若A→B，B→C，则A→C
    - B. 若Y⊆X⊆U，则X→Y
    - C. 若A→B，A→C，则A→BC
    - D. 若A→B，C⊆B，则A→C

    答案: C

2. 💛给定关系模式$R(U, F)$，其中$U$为属性集，$F$是$U$上的一组函数依赖，那么函数依赖的公理系统(Armstrong公理系统)中的分解规则是指______为$F$所蕴涵。

    - A. 若$X→Y$，$Y→Z$，则$X→Z$
    - B. 若$Y⊆X⊆U$，则$X→Y$
    - C. 若$X→Y$，$Z⊆Y$，则$X→Z$
    - D. 若$X→Y$，$Y→Z$，则$X→YZ$

    答案：C

### 考察问

- 💛Armstrong公理系统: 自反律, 增广律, 传递律, 合并律, 分解律, 伪传递率

    ✨不要求全部都记, 题型考察从算式推名称. 传递律和伪传递律好记, 然后记`()`

    - `()`律:
        1. $X = \{学号, 姓名\}$，$Y = \{姓名\}$(既$Y \subseteq X$)
        2. $\{学号, 姓名\} \rightarrow \{姓名\}$(既$X \to Y$)
    - `()`律:
        1. $\{学号\} \rightarrow \{姓名\}$(既$X \to Y$)，$Z = \{年龄\}$(既$Z \subseteq U$)
        2. $\{学号, 年龄\} \rightarrow \{姓名, 年龄\}$(既$XZ \to YZ$)
    - `()`律: $X \to Y$，$Y \to Z$, 则有$X \to Z$
    - `()`律:
        1. $\{学号\} \rightarrow \{姓名\}$，$\{学号\} \rightarrow \{年龄\}$(既$X \to Y$，$X \to Z$)
        2. $\{学号\} \rightarrow \{姓名, 年龄\}$(既$X \to YZ$)
    - `()`律:
        1. $\{学号\} \rightarrow \{姓名, 年龄\}$, $Z = \{年龄\}$(既$X \to Y$, $Z \subseteq Y$)
        2. $\{学号\} \rightarrow \{姓名\}$(既$X \to Z$)
    - `()`律:
        1. $\{学号\} \rightarrow \{课程号\}$，$\{课程号, 学期\} \rightarrow \{成绩\}$(既$X \to Y$，$WY \to Z$)
        2. $\{学号, 学期\} \rightarrow \{成绩\}$(既$XW \to Z$)

### 考察点

- Armstrong公理系统: 自反律, 增广律, 传递律, 合并律, 分解律, 伪传递率

    ✨不要求全部都记, 题型考察从算式推名称. 传递律和伪传递律好记, 然后记`自增分合`

    - `自反`律:
        1. $X = \{学号, 姓名\}$，$Y = \{姓名\}$(既$Y \subseteq X$)
        2. $\{学号, 姓名\} \rightarrow \{姓名\}$(既$X \to Y$)
    - `增广`律:
        1. $\{学号\} \rightarrow \{姓名\}$(既$X \to Y$)，$Z = \{年龄\}$(既$Z \subseteq U$)
        2. $\{学号, 年龄\} \rightarrow \{姓名, 年龄\}$(既$XZ \to YZ$)
    - `传递`律: $X \to Y$，$Y \to Z$, 则有$X \to Z$
    - `合并`律:
        1. $\{学号\} \rightarrow \{姓名\}$，$\{学号\} \rightarrow \{年龄\}$(既$X \to Y$，$X \to Z$)
        2. $\{学号\} \rightarrow \{姓名, 年龄\}$(既$X \to YZ$)
    - `分解`律:
        1. $\{学号\} \rightarrow \{姓名, 年龄\}$, $Z = \{年龄\}$(既$X \to Y$, $Z \subseteq Y$)
        2. $\{学号\} \rightarrow \{姓名\}$(既$X \to Z$)
    - `伪传递`律:
        1. $\{学号\} \rightarrow \{课程号\}$，$\{课程号, 学期\} \rightarrow \{成绩\}$(既$X \to Y$，$WY \to Z$)
        2. $\{学号, 学期\} \rightarrow \{成绩\}$(既$XW \to Z$)

## 函数依赖的公理系统(Armstrong公理系统)

设关系模式$R(U,F)$，其中$U$为属性集，$F$是$U$上的一组函数依赖，$X$, $Y$, $Z$表示属性集, 那么有以下推理规则：

- 自反律(Reflexivity)：如Y是X的子集, 则Y依赖于X. 若$Y \subseteq X \subseteq U$，则$X \to Y$为$F$所蕴涵。

    这里的 $U$ 是关系模式 $R$ 的属性集，$X$ 和 $Y$ 是 $U$ 的子集。也就是说，如果 $Y$ 是 $X$ 的子集，那么 $X$ 函数决定 $Y$。这是一个平凡的函数依赖，因为一个属性集总能决定它的任何子集。

    假设有一个学生关系模式 $R(学号, 姓名, 性别, 年龄)$，设 $X = \{学号, 姓名\}$，$Y = \{姓名\}$，因为 $Y$ 是 $X$ 的子集，根据自反律，有 $\{学号, 姓名\} \rightarrow \{姓名\}$

- 增广律(Augmentation)：添加相同属性, 函数依赖不变. 若$X \to Y$为$F$所蕴涵，且$Z \subseteq U$，则$XZ \to YZ$为$F$所蕴涵。

    $XZ$ 表示 $X \cup Z$。即在函数依赖的两边可以同时增加相同的属性。

    在学生关系模式 $R$ 中，已知 $\{学号\} \rightarrow \{姓名\}$，设 $Z = \{年龄\}$，根据增广律，就有 $\{学号, 年龄\} \rightarrow \{姓名, 年龄\}$。

- 传递律(Transitivity)：若$X \to Y$，$Y \to Z$为$F$所蕴涵，则$X \to Z$为$F$所蕴涵。

    在学生选课关系模式 $R(学号, 课程号, 教师号)$ 中，已知 $\{学号\} \rightarrow \{课程号\}$(一个学生选的课程是确定的)，$\{课程号\} \rightarrow \{教师号\}$(一门课程由固定的教师教授)，根据传递律，可得 $\{学号\} \rightarrow \{教师号\}$

根据以上三条推理规则，又可推出三条推理规则：

- 合并规则(Union Rule)： 若$X \to Y$，$X \to Z$，则$X \to YZ$为$F$所蕴含。

    合并律 = 传递 + 增广

    在学生关系模式 $R$ 中，已知 $\{学号\} \rightarrow \{姓名\}$，$\{学号\} \rightarrow \{年龄\}$，根据合并规则，可得 $\{学号\} \rightarrow \{姓名, 年龄\}$

- 分解规则(Decomposition Rule)： 若$X \to Y$，$Z \subseteq Y$，则$X \to Z$为$F$所蕴含。

    伪传递律 = 传递 + 自反(约等于废话)

    已知在学生关系模式 $R$ 中 $\{学号\} \rightarrow \{姓名, 年龄\}$，根据分解规则，可得 $\{学号\} \rightarrow \{姓名\}$ 和 $\{学号\} \rightarrow \{年龄\}$

- 伪传递规则(Pseudo - Transitivity)： 若$X \to Y$，$WY \to Z$，则$XW \to Z$为$F$所蕴含。

    伪传递律 = 传递 + 增广

    在学生选课关系模式 $R$ 中，已知 $\{学号\} \rightarrow \{课程号\}$，$\{课程号, 学期\} \rightarrow \{成绩\}$，设 $X = \{学号\}$，$Y = \{课程号\}$，$W = \{学期\}$，$Z = \{成绩\}$，根据伪传递规则，可得 $\{学号, 学期\} \rightarrow \{成绩\}$

✨"为$F$所蕴涵"的意思就是"成立"
