# NoSQL

## 概念

NoSQL（Not - only SQL）：不仅仅只是SQL，泛指非关系型的数据库。

## NoSQL数据库分类

|分类|典型应用场景|数据模型|优点|缺点|举例|
| ---- | ---- | ---- | ---- | ---- | ---- |
|键值（key-value）|内容缓存，主要用于处理大量数据的高访问负载，也用于一些日志系统等等|Key指向Value的键值对，通常用hash table来实现|查找速度快|数据无结构化，通常只被当作字符串或者二进制数据|Redis，Tokyo Cabinet，Tyrant，Voldemort，Oracle BDB|
|列存储数据库|分布式的文件系统|以列簇式存储，将同一列数据存在一起|查找速度快，可扩展性强，更容易进行分布式扩展|功能相对局限|HBase，Cassandra，Riak|
|文档型数据库|Web应用（与Key-Value类似，Value是结构化的，不同的是数据库能够了解Value的内容）|Key-Value对应的键值对，Value为结构化数据|数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构|查询性能不高，而且缺乏统一的查询语法|CouchDB，MongoDB|
|图形数据库(Graph)|社交网络，推荐系统等。专注于构建关系图谱|图结构|利用图结构相关算法，比如最短路径寻址，N度关系查找等|很多时候需要对整个图做计算才能得出需要的信息，而且这种结构不太好做分布式的集群方案|Neo4J，InfoGrid，Infinite Graph|

## 数据类型比较

### 基本概念

1. 关系型数据库：由多张能互相联接的二维行列表格组成的数据库。建立在关系模型基础上的数据库，借助集合代数等数学概念和方法来处理数据库中的数据。

2. NoSQL：泛指非关系型的数据库。为了解决大规模数据集合多重数据种类带来的挑战，尤其是大数据应用难题，包括超大规模数据的存储，如Mongodb、Redis、Hbase、neo4j、Cassandra等。


### 关系数据库模式与NoSQL模式的特征对比

| 特征 | 关系数据库模式 | NoSQL模式 |
| ---- | ---- | ---- |
| 并发支持 | 支持并发、效率低 | 并发性能高 |
| 存储与查询 | 关系表方式存储、SQL查询 | 海量数据存储、查询效率高 |
| 扩展方式 | 向上扩展 | 向外扩展 |
| 索引方式 | B树、哈希等 | 键值索引 |
| 应用领域 | 面向通用领域 | 特定应用领域 |
| 数据一致性 | 实时一致性 | 弱一致性 |
| 数据类型 | 结构化数据 | 非结构化 |
| 事物 | 高事务性 | 弱事务性 |
| 水平扩展 | 弱 | 强 |
| 数据容量 | 有限数据 | 海量数据 |

### 内存数据库与关系数据库的对比

|  | 内存数据库 | 关系数据库 |
| ---- | ---- | ---- |
| 主要数据模型 | Key - Value模式(键 - 值对模式) | 关系模式 |
| 读写性能 | 内存直接读写，性能相对较高 | 外存读写，性能相对较低 |
| 存储容量 | 基于内存存储，存储容量受限 | 基于存盘存储，存储容量大 |
| 可靠性 | 恢复机制复杂，可靠性较低 | 内建恢复机制，可靠性较高 |

### 关系型数据库与文件系统的对比

|  | 关系型数据库 | 文件系统 |
| ---- | ---- | ---- |
| 设计难度 | 针对特定应用系统设计，难度较大 | 针对特定应用系统设计，难度较小 |
| 数据冗余程度 | 遵守数据库范式，数据冗余较小 | 可能在多个文件中复制相同的数据属性，数据冗余较大 |
| 数据架构 | 以数据库为中心组织，管理数据 | 以应用为中心管理数据 |
| 应用扩展性 | 数据库独立于应用系统，数据库系统接口标准化，易于在不同应用之间共享数据 | 符合特定应用系统要求的文件数据很难在不同的应用系统之间共享 |