# 系统配置与性能评价

### 考察问

1. 🟡🟥❤️性能指标(太多, 不用记)
2. 🟡🟩💛性能评价方法: 真实的程序, 基准测试程序(核心程序)
3. 🟡🟩❤️阿姆达尔公式: 总加速比 = ((1-占比) * (占比/加速比))的倒数

### 考察点

1. 性能指标
    1. 计算机: `时钟频率（主频）`、`运算速度与精度`、`内存的存储容量`、`存储器的存取周期`、`数据处理速率PDR`
    2. 路由器: `丢包率`、`时延`、`时延抖动`
    3. 交换机:
    4. 操作系统:
    5. 数据库:
    6. WEB服务器: 连接数、响应延迟、吞吐量
2. 性能评价方法
    1. 基准测试程序(benchmark): 把核心程序拿出来测试
    2. 真实的程序 > 核心程序(基准测试程序) > 小型基准程序 > 合成基准程序
3. 阿姆达尔公式: 总加速比 = ((1-占比) * (占比/加速比))的导数

## 性能指标

1. 硬件

    - 计算机：性能指标有`时钟频率（主频）`、`运算速度与精度`、`内存的存储容量`、`存储器的存取周期`、`数据处理速率PDR`、吞吐量、各种响应时间、各种利用率、RASIS特性、平均故障响应时间、兼容性、可扩充性、性能价格比。
    - 路由器：设备吞吐量、端口吞吐量、全双工线速转发能力、背靠背帧数、路由表能力、背板能力、`丢包率`、`时延`、`时延抖动`、VPN支持能力、内部时钟精度、队列管理机制、端口硬件队列数、分类业务带宽保证、RSVP、IPDifISerV、CAR支持、冗余、热插拔组件、路由器冗余协议、网管、基于Web的管理、网管类型、带外网管支持、网管粒度、计费能力/协议、分组语音支持方式、协议支持、语音压缩能力、端口密度、信令支持。
    - 交换机：交换机类型、配置、支持的网络类型、最大ATM端口数、最大SONET端口数、最大FDDI端口数、背板吞吐量、缓冲区大小、最大MAC地址表大小、最大电源数、支持协议和标准、路由信息协议（RIP）、RIP2、开放式最短路径优先第2版、边界网关协议（BGP）、无类别域间路由（CIDR）、互联网成组管理协议（IGMP）、距离矢量多播路由协议（DVMRP）、开放式最短路径优先多播路由协议（MOSPF）、协议无关的多播协议（PIM）、资源预留协议（RSVP）、802.lp优先级标记，多队列、路由、支持第3层交换、支持多层（4-7层）交换、支持多协议路由、支持路由缓存、可支持最大路由表数、VLAN、最大VLAN数量、网管、支持网管类型、支持端口镜像、QoS、支持基于策略的第2层交换、每端口最大优先级队列数、支持基于策略的第3层交换、支持基于策略的应用级QoS、支持最小/最大带宽分配、余、热交换组件（管理卡、交换结构、接口模块、电源、冷却系统）、支持端口链路聚集协议、负载均衡。
    - 网络：性能指标有网络设备级性能指标、网络级性能指标、应用级性能指标、用户级性能指标、吞吐量 。

2. 软件

    - 操作系统有：系统的可靠性、系统上下文切换、系统响应时间、系统的吞吐率（量）、系统资源利用率、可靠性和可移植性。
    - 数据库管理系统：衡量其性能的指标包括数据库本身和管理系统两部分，具体有数据库的大小、数据库中表的数量、单个表的大小、表中允许的记录（行）数量、单个记录（行）的大小、表上所允许的索引数量、数据库所允许的索引数量、最大并发事务处理能力、负载均衡能力、最大连接数等。
    - WEB服务器：性能指标有最大并发连接数、响应延迟、吞吐量。

🔒题目:

1. 💚对计算机评价的主要性能指标有时钟频率、( )、运算精度和内存容量等。对数据库管理系统评价的主要性能指标有( )、数据库所允许的索引数量和最大并发实物处理能力等。

    - A. 丢包率
    - B. 端口吞吐量
    - C. 可移植性
    - D. 数据处理速率
    - A. MIPS
    - B. 支持协议和标准
    - C. 最大连接数
    - D. 时延抖动

    答案：D C

2. ❤️为优化系统性能，有时需对系统进行调整，不同系统的调整参数不同。具体例子如下：1. 对于数据库系统，主要调整参数包括CPU/内存使用状况、（  ）、进程/线程使用状态、日志文件大小等。2. 对于应用系统，主要调整参数包括应用系统的可用性、响应时间、（  ）、特定应用资源占用等。

    - A. 数据丢包率  
    - B. 端口吞吐量  
    - C. 数据处理速率  
    - D. 查询语句性能
    - A. 并发用户数  
    - B. 支持协议和标准  
    - C. 最大连接数  
    - D. 时延抖动

    答案: DA

## 性能评价方法

性能评估是按照一定的步骤，选用一定的度量项目，通过建模和实验，对一个系统的性能进行各项检测，对测试结果做出解释，并形成一份文档的技术。

大多数情况下，为测试新系统的性能，用户必须依靠评价程序来评价机器的性能。下面列出了4种评价程序，它们评测的准确程度依次递减：真实的程序 > 核心程序(基准测试程序) > 小型基准程序 > 合成基准程序。

基准测试程序(benchmark)：把应用程序中用得最多、最频繁的那部分核心程序作为评价计算机性能的标准程序，称为基准测试程序。其是目前被用户一致承认的测试系统性能的较好方法，有多种多样的基准程序，包括：

1. 整数测试基准程序。同一厂家的机器，采用相同的体系结构，用相同的基准程序测试，得到的MIPS值越大，一般说明机器速度越快。MIPS=指令条数/(执行时间×10⁶)=主频/CPI=主频×IPC
2. 浮点测试基准程序。指标MFLOPS(理论峰值浮点速度)。 MFLOPS=浮点操作次数/(执行时间×10⁶)
3. SPEC基准程序(SPEC Benchmark)。重点面向处理器性能的基准程序集，将被测计算机的执行时间标准化，即将被测计算机的执行时间除以一个参考处理器的执行时间。
4. TPC基准基准程序。用于评测计算机在事务处理、数据库处理、企业管理与决策支持系统等方面的性能。其中，TPC-C是在线事务处理(On-line Transaction Processing，OLTP)的基准程序，TPC-D是决策支持的基准程序。TPC-E作为大型企业信息服务的基准程序。

🔒题目:

1. 💛把应用程序中应用最频繁的那部分核心程序作为评价计算机性能的标准程序，称为（  ）程序。（  ）不是对Web服务器进行性能评估的主要指标。

    - A. 仿真测试
    - B. 核心测试
    - C. 基准测试
    - D. 标准测试
    - A. 丢包率
    - B. 最大并发连接数
    - C. 响应延迟
    - D. 吞吐量

    答案: CA

2. 💚通常用户采用评价程序来评价系统的性能，评测准确度最高的评价程序是（  ）。在计算机性能评估中，通常将评价程序中用得最多、最频繁的（  ）作为评价计算机性能的标准程序，称其为基准测试程序。

    - A. 真实程序
    - B. 核心程序
    - C. 小型基准程序
    - D. 核心基准程序

    答案: AB

3. 🔴以下关于计算机性能改进的叙述中，正确的是（  ）。

    - A. 如果某计算机系统的CPU利用率已经达到100%则该系统不可能再进行性能改进
    - B. 使用虚存的计算机系统如果主存太小，则页面交换的频率将增加，CPU的使用效率就会降低，因此应当增加更多的内存
    - C. 如果磁盘存取速度低，引起排队，此时应安装更快的CPU.以提高性能
    - D. 多处理机的性能正比于CPU的数目，增加CPU是改进性能的主要途径

    答案: B

## 阿姆达尔(Amdahl)

对系统中某组件采用某种更快的执行方式，所获得的系统性能的改变程度，取决于该组件被使用的频率，或所占总执行时间的比例。加速比计算公式如下：

$$
\text{加速比}=\frac{\text{不使用改进部件时完成整个任务的时间}}{\text{使用改进部件时完成整个任务的时间}}$$

$$
\text{总加速比}=\frac{\text{原来的执行时间}}{\text{新的执行时间}}=\frac{1}{((1 - \text{改进部分占比})+\frac{\text{改进部分占比}}{\text{改进部分的加速比}})}
$$

$$
R=\frac{T_p}{T_i}=\frac{1}{(1 - F_e)+F_e/S_e}
$$

其中，
1. $T_p$表示不使用改进组件时完成整个任务的时间
2. $T_i$表示使用改进组件时完成整个任务的时间。
3. 总加速比主要取决于两个因素
    1. 改进部分占比: 在原有的系统上，能被改进的部分在总执行时间中所占的比例，记为$F_e$，它总是小于1。
    2. 改进部分加速比: 改进部分之前执行时间/改进之后的执行时间, 记为$S_e$，它总大于1。

🔒题目:

1. 🟡阿姆达尔（Amdahl）定律量化定义了通过改进系统中某个组件的性能，使系统整体性能提高的程度。假设某一功能的处理时间为整个系统运行时间的60%，若使该功能的处理速度提高至原来的5倍，则根据阿姆达尔定律，整个系统的处理速度可提高至原来的（  ）倍。

    - A. 1.333
    - B. 1.923
    - C. 1.5
    - D. 1.829

    答案: B

    $$
    \frac{1}{0.4+0.6/5}
    $$

2. 🟡假设单个CPU的性能为1，则由n个这种CPU组成的多处理机系统的性能P为：

    $$
    P = \frac{n}{1 + (n - 1)a}
    $$

    其中，a是一个表示开销的常数。例如，a=0.1，n=4时，P约为3。也就是说，由4个这种CPU组成的多机系统的性能约为3。该公式表明，多机系统的性能有一个上限，不管n如何增加，P都不会超过某个值。当a=0.1时，这个上限是（ B ）。

    - A. 5
    - B. 10
    - C. 15
    - D. 20

    $$
    p=\frac{n}{1+(n - 1)a} \Rightarrow p=\frac{n}{1 + 0.1n - 0.1} \Rightarrow p=\frac{n}{0.1n}=10
    $$
