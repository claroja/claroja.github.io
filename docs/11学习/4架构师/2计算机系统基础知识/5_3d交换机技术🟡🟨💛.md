# 交换技术

## 最佳实践

### 考察点

1. 以下关于以太网交换机转发的叙述中，正确的是()。
    - A. 交换机的初始MAC地址表为空
    - B. 交换机接收到数据帧后，如果没有相应的表项，则不转发该帧
    - C. 交换机通过读取输入帧中的目的地址添加相应的MAC地址表项
    - D. 交换机的MAC地址表项是静态增长的，重启时地址表清空

    答案：A

    MAC地址表是交换机的一个核心组成部分，交换机主要是根据MAC地址表来进行帧的转发的。

    交换机对帧的转发操作行为一共有3种： 泛洪(Flooding)、转发(Forwarding)和丢弃(Discarding)。

    在不涉及VLAN的情况下，交换机的转发原理可以概括地描述为：
    1. 如果进入交换机的是一个单播帧,则交换机会去MAC地址表中查找这个帧的目的MAC地址,如果查不到这个MAC地址,则交换机将对该帧执行泛洪操作;如果查到了这个MAC地址,则比较这个MAC地址在MAC地址表中对应的端口是不是这个帧进入交换机的那个端口,如果不是,则交换机将对该帧执行转发操作,如果是,则交换机将对该帧执行丢弃操作。
    2. 如果进入交换机的是一个广播帧, 则交换机不会去查MAC地址表，而是直接对该帧执行泛洪操作。
    3. 如果进入交换机的是一个组播帧, 则交换机的处理行为比较复杂。


### 考察问

1. 交换机对帧的转发操作行为一共有3种： `()`、`()`和`()`。
2. 在不涉及VLAN的情况下，交换机的转发原理可以概括地描述为：
    1. 如果进入交换机的是一个单播帧,则交换机会去MAC地址表中查找这个帧的目的MAC地址,如果查不到这个MAC地址,则交换机将对该帧执行`()`操作;如果查到了这个MAC地址,则比较这个MAC地址在MAC地址表中对应的端口是不是这个帧进入交换机的那个端口, 如果不是,则交换机将对该帧执行`()`操作,如果是,则交换机将对该帧执行`()`操作。
    2. 如果进入交换机的是一个广播帧, 则交换机不会去查MAC地址表，而是直接对该帧执行`()`操作。

### 考察点

1. 交换机对帧的转发操作行为一共有3种： `泛洪(Flooding)`、`转发(Forwarding)`和`丢弃(Discarding)`。
2. 在不涉及VLAN的情况下，交换机的转发原理可以概括地描述为：
    1. 如果进入交换机的是一个单播帧,则交换机会去MAC地址表中查找这个帧的目的MAC地址,如果查不到这个MAC地址,则交换机将对该帧执行`泛洪`操作;如果查到了这个MAC地址,则比较这个MAC地址在MAC地址表中对应的端口是不是这个帧进入交换机的那个端口, 如果不是, 则交换机将对该帧执行`转发`操作,如果是,则交换机将对该帧执行`丢弃`操作。
    2. 如果进入交换机的是一个广播帧, 则交换机不会去查MAC地址表，而是直接对该帧执行`泛洪`操作。

## 交换技术

- 数据在网络中转发通常离不开交换机。人们日常使用的计算机通常就是通过交换机接入网络的。
- 交换机功能包括：
    1. 集线功能。提供大量可供线缆连接的端口达到部署星状拓扑网络的目的。
    2. 中继功能。在转发帧时重新产生不失真的电信号。
    3. 桥接功能。在内置的端口上使用相同的转发和过滤逻辑。
    4. 隔离冲突域功能。将部署好的局域网分为多个冲突域，而每个冲突域都有自己独立的带宽，以提高交换机整体宽带利用效率。
- 交换机需要实现的功能如下所述：
    1. 转发路径学习。根据收到数据帧中的源MAC地址建立该地址同交换机端口的映射，写入MAC地址表中。
    2. 数据转发。如果交换机根据数据帧中的目的MAC地址在建立好的MAC地址表中查询到了，就向对应端口进行转发。
    3. 数据泛洪。如果数据帧中的目的MAC地址不在MAC地址表中，则向所有端口转发，也就是泛洪。广播帧和组播帧向所有端口(不包括源端口)进行转发。
    4. 链路地址更新。MAC地址表会每隔一定时间(如300s)更新一次。



## 参考

1. <https://zhuanlan.zhihu.com/p/390257185>
