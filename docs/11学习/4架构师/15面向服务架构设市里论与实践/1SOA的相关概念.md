# SOA的相关概念


## 最佳实践

### 考察问

1. 面向服务架构设计(Service Oriented Architecture, SOA)
    1. 定义: SOA(Service Oriented Architecture): 将应用`()`拆分成不同`()`, 通过这些服务之间定义良好的`()`联系起来。
    2. 流程组成: 服务`()`、服务`()` (或企业服务总线)、服务`()`。服务提供者将服务描述发布到服务注册中心，供服务请求者查找，查找到后，服务请求者将绑定查找结果。
    3. 设计模式组成:

        1. 服务`()`模式

        2. 服务`()`模式(Enterprise Service Bus, EBS)

            处于服务`()`和服务`()`之间，为不同服务间的通信、交互提供支撑. 主要包含: `()`, `()`, `()`

        3. `()`模式

    4. 设计原则组成

        1. 通过`()`的设计原则，应用被分解为多个服务，可分别选择不同的技术，单个服务模块很容易开发、理解和维护，无需协调其他服务对本服务的影响；
        2. 通过`()`的设计原则，微服务可以分布式云化部署，负载均衡管理请求的分发，避免单机失败对整体服务的影响，以及弹性调整资源容量；
        3. 通过`()`的设计原则，能够对系统进行健康检查、指标监控、日志管理和链路追踪，提高系统运维、管理和排错能力；
        4. 通过`()`的设计原则，可实现系统的自动化部署、自动化扩展伸缩、自动化运维、持续交付和集成，有效减少人工操作的工作量。

### 考察点

1. 面向服务架构设计(Service Oriented Architecture, SOA)
    1. 定义: SOA(Service Oriented Architecture): 将应用`程序`拆分成不同`服务`, 通过这些服务之间定义良好的`接口`联系起来。
    2. 流程组成: 服务`提供者`、服务`注册中心` (或企业服务总线)、服务`请求者`。服务提供者将服务描述发布到服务注册中心，供服务请求者查找，查找到后，服务请求者将绑定查找结果。
    3. 设计模式组成:

        1. 服务`注册表`模式

        2. 服务`总线`模式(Enterprise Service Bus, EBS)

            处于服务`提供者`和服务`消费者`之间，为不同服务间的通信、交互提供支撑. 主要包含: `协议转换`, `消息路由`, `服务注册`

        3. `微服务`模式

    4. 设计原则组成

        2. 通过`强韧性`的设计原则，微服务可以分布式云化部署，负载均衡管理请求的分发，避免单机失败对整体服务的影响，以及弹性调整资源容量；
        3. 通过`可观测性`的设计原则，能够对系统进行健康检查、指标监控、日志管理和链路追踪，提高系统运维、管理和排错能力；
        1. 通过`服务化`的设计原则，应用被分解为多个服务，可分别选择不同的技术，单个服务模块很容易开发、理解和维护，无需协调其他服务对本服务的影响；
        4. 通过`自动化`的设计原则，可实现系统的自动化部署、自动化扩展伸缩、自动化运维、持续交付和集成，有效减少人工操作的工作量。

        ✨强测浮动

2. 微服务
    1. 概念: 相较于SOA, 服务更加微小, 去除ESB
    2. 特点:
        1. 优点:
            1. 独立`开发测试部署`
            2. 复杂应用解耦, 每个服务专注一个功能(开发)
            3. 技术选型灵活(开发)
            4. 容错(运行)
            5. 容易拓展(迭代)
        2. 缺点:
            1. 复杂性：微服务架构涉及到分布式系统，需要处理分布式事务、服务发现、服务治理等复杂同题。
            2. 部署和测试: 由于微服务的数量增加，部署和测试变得更加复杂。
            3. 运维成本：微服务架构需要更多的运维工作，包括监控、日志收集、故障排查等。

🔒问答题

1. (7分)简述微服务架构对比单体架构和微服务架构微服务架构的优缺点。(2024上)
    微服务架构是一种分布式系统架构，将一个应用程序拆分为一组小型、独立的服务，每个服务都围绕特定的业务功能构建，并通过轻量级通信机制进行通信。相比之下，单体架构将整个应用程序作为一个单一的单元构建和部署。

    微服务架构的优点：
    - 灵活性和可扩展性：每个微服务都是独立的，可以独立部署和扩展，使系统更具弹性。
    - 技术多样性：每个微服务可以使用不同的技术栈，使开发团队可以选择最适合其需求的技术。 
    - 易于理解和维护：微服务的小型化和聚焦性使得代码更易于理解、开发和维护。

    微服务架构的缺点：
    - 复杂性：微服务架构涉及到分布式系统，需要处理分布式事务、服务发现、服务治理等复杂问题。
    - 部署和测试：由于微服务的数量增加，部署和测试变得更加复杂。 
    - 运维成本：微服务架构需要更多的运维工作，包括监控、日志收集、故障排查等。 


## SOA的定义

在面向服务的体系结构(Service-Oriented Architecture, SOA) 中，服务的概念有了延伸，泛指系统对外提供的功能集。例如，在一个大型企业内部，可能存在进销存、人事档案和财务等多个系统，在实施 SOA后，每个系统用于提供相应的服务，财务系统作为资金运作的重要环节，也向整个企业信息化系统提供财务处理的服务，那么财务系统的开放接口可以看成是一个服务。

从应用的角度定义，可以认为SOA是一种应用框架，它着眼于日常的业务应用，并将它们划分为单独的业务功能和流程，即所谓的服务。SOA使用户可以构建、部署和整合这些服务，且无需依赖应用程序及其运行平台，从而提高业务流程的灵活性。这种业务灵活性可使企业加快发展速度，降低总体拥有成本，改善对及时、准确信息的访问。SOA有助于实现更多的资产重用、更轻松的管理和更快的开发与部署。

从软件的基本原理定义，可以认为SOA是一个组件模型，它将应用程序的不同功能单元(称为服务)通过这些服务之间定义良好的接口和契约联系起来。接口是采用中立的方式进行定义的，它应该独立于实现服务的硬件平台、操作系统和编程语言。这使得构建在各种这样的系统中的服务可以一种统一和通用的方式进行交互。

作为软件架构师，后一种从软件原理方面的定义，对日常工作更具指导性。

## 业务流程与BPEL

业务流程是指为了实现某种业务目的行为所进行的流程或一系列动作。在计算机领域，业务流程代表的是某一个问题在计算机系统内部得到解决的全部流程。

由于业务流程来源于现实世界，传统上是通过复杂的语言进行描述。在计算机业务系统建模中，需要用到一种特定的、简洁的语言来专门描述计算机系统的业务流程，这便促使了BPEL 的诞生。

BPEL(Business Process Execution Language For Web Services) 翻译成中文的意思是面向Web 服务的业务流程执行语言, 它是一种使用 Web 服务定义和执行业务流程的语言。使用BPEL, 用户可以通过组合、编排和协调Web服务自上而下地实现面向服务的体系结构。BPEL提供了一种相对简单易懂的方法，可将多个Web服务组合到一个新的复合服务(称作业务流程)中。