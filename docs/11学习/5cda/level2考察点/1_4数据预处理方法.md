# 数据采集与处理_数据预处理方法

考纲:

- 熟知
    - 数据预处理的基本步骤，包括数据集成（不同数据源的整合）、数据探索、数据变换（标准化）、数据归约（维度归约技术、数值归约技术），这部分内容不涉及计算，只需要根据需求明确可选的处理技术即可。
- 应用
    - 数据清洗，包括填补遗漏的数据值（根据业务场景使用常数、中位数、众数等方法，不涉及多重查补的方法）、平滑有噪声数据（移动平均）、识别或除去异常值（单变量根据中心标准化值，多变量使用快速聚类），以及解决不一致问题（熟知概念即可），查重（只考核 SQL 的语句，不涉及其它语言）。

分值:

d.数据预处理方法（占比3%）

## 考点: 缺失值处理

### 考点: 缺失值填补方法
- 考点
    - 插值法：可以使用线性插值、多项式插值、样条插值等方法来填补缺失值，
    - EM算法是一种迭代算法，可以用来估计缺失值的概率分布，并进行填补。
    - 随机森林填补：随机森林是一种基于决策树的集成学习方法，可以用来预测缺失值并进行填补。

- 题目: 
    - 🟢(多选题)某连续型变量的数据集存在缺失值，可以采用那种方法处理？  
    A、插值法填补  
    B、EM算法填补  
    C、随机森林慎补  
    D、以上均不对

    正确答案：ABC



### 考点: 缺失值处理: 哑变量
- 考点:
    1. 少于20%时, `连续变量`使用`均值或中位数`填补; `分类变量`不需要填补,`单算一类`即可, 或可以用`众数`填补
    2. 大于20%小于80%时, 填补方法同上, 同时给缺失值`生成一个指示哑变量`, 参与后续的建模
    3. 多于80%时, 给缺失值`生成一个指示哑变量`, 参与后续的建模, 原始变量不再使用


- 题目: 

    - 🟢(单选题)在数据清洗阶段，以下( )处理方式可以用来处理缺失值。1用均值填充, 2转换为哑变量(0,1)表示数据是否缺失, 3使用回归模型预测缺失值  
        A、123   
        B、2  
        C、13  
        D、12 

        答案:A 


    - 🔴(单选)在数据分析过程中数据并不是完美的，比如数据中的缺失值会影响我们的分析，下面关于缺失值的填补说法错误的是( )。  
        A、一般来说，当缺失值数量少于20%时，连续变量必须使用均值或中位数填补  
        B、分类型变量不需要填补，单算一类即可，或者可以用众数填补  
        C、当缺失值数量处于20%~80%时，填补方法同上，同时每个有缺失值的变量可以生成一个指示哑变量，参与后续的建模  
        D、当缺失值数量多于80%时，每个有缺失值的变量生成一个指示哑变量，参与后续的建模，原始变量不再被使用

        答案:A 


## 考点: 训练集测试集数据预处理

- 内容

    都是用训练集的

- 题目: 
    - 🔴(单选题)关于缺失值填充与训练集、测试集的关系，下面正确的操作是（）  
        A、先用全数据的均值填充缺失值，然后随机分割训练集、测试集  
        B、先随机分割训练集、测试集，然后用各自集合的均值填充缺失值  
        C、先随机分割训练集、测试集，然后用训练集的均值填充缺失值  
        D、先随机分割训练集、测试集，然后用测试集的均值填充缺失值

        正确答案：C


    - 🔴(单选题)如果一个回归模型分为两步：先使用PCA降维，然后用多元线性回归做预测，那么测试集的结果应当如何计算（）  
        A、用训练集上的PCA模型处理测试集数据，然后把得到的数据输入到多元线性回归模型做预测。  
        B、用测试集上的PCA模型处理测试集数据，然后把得到的数据输入到多元线性回归模型做预测。  
        C、用全部数据集上的PCA模型处理试集数据，然后把得到的数据输入到多元线性回归模型做预测
        D、以上皆可

        正确答案：A

    - 🔴(单选题)建模中对数据中的某变量x做了z标准化，那么在模型实际上线后，怎么对x做标准化处理？  
        A、使用训练数据集的均值和方差  
        B、使用测试数据集的均值和方差  
        C、使用验证数据集的均值和方差  
        D、使用全部数据集的均值和方差

        正确答案：A


## 考点: 数据预处理

- 🟢(单选题)在使用机器学习算法训练模型时需要先对数据进行特征工程处理例如：统一数据量纲、对数据进行编码等，以下方法可以改变数据量纲的是（）  
    A、对数据做归一化处理  
    B、对数据做z-score标准化  
    C、对数据取对数  
    D、以上都是

    正确答案：D


- 🟢(多选题)属于数据标准化的方法有？  
    A、Z-score标准化  
    B、施密特标准化  
    C、区间缩放  
    D、向量单位化

    正确答案：ACD 解析：B选项施密特标准化是在线性代数中求解标准正交向量组时使用的方法。其他选项都是数据标准化的方法


- 🟢(单选题)在发现数据的异常之后可以回潮数据的来源找出问题所在，从而对其进行修正或删除。如下修正的方法错误的是（）  
    A、如果有足够多的信息，则直接补充正确信息。  
    B、在信息不足的情况下，不能对照其他信息源进行修正，  
    C、若所有的信息都不能支撑我们补充该信息，则将其视为空值。  
    D、对于错误的异常值数据，还可以进行别除操作。

    正确答案：B,在信息不足的情况下，对照其他信息源进行修正。

## 考点: 异常值

- 🟡(多选题)能检测异常值的方法有？  
    A、箱线图  
    B、🔴散点图  
    C、条形图  
    D、3 sigma法则

    正确答案：ABD



- 🟢(单选题)下列哪项方法对发现异常值有帮助？( )   
    A、使用均值±3倍标准差设置阀值  
    B、梯度下降法  
    C、相关性分析  
    D、归一化处理

    答案:A 


- 🟡(单选题)下列哪项方法对发现异常值没有帮助？( )   
    A、均值加减标准差法  
    B、🔴百分数法  
    C、聚类法  
    D、梯度下降法

    答案:D 

- 🟢(单选题)数据在实际应用之前需要进行必要的清洗来处理数据中的异常值、缺失值、重复值等，下列哪一项方法不能用于发现异常值（）  
    A、均值加减标准差法  
    B、绘制箱线图  
    C、聚类法  
    D、梯度下降法

    正确答案：D,
## 考点: 数据清洗

- 🟢(单选题)下列不属于“脏数据”的是( )。  
    A、重复数据   
    B、错误数据  
    C、交叉数据  
    D、缺失数据

    答案:C 


### WOE

- 考点:
    - 分箱: 记忆方法: 宽泛🟨
        - 等`宽`分箱: 相同`范`围
        - 等深分箱: 相同数量


- 🟡(单选题)对于连续变量在W0E编码之前可以先做分箱。分箱方法中的等宽分箱特点是什么？
    A、每个分箱中的样本量一致
    B、每个分箱中的取值范围一致
    C、基于变量的百分位秩
    D、基于Tukey.正态分布打分

    正确答宾：B, 解析：等宽分箱方法的主要特点是每个箱子包含相同范围的值，这与等深分箱不同，后者强调每个箱子内有相同数量的观察值。


- 🟡(单选题)以下哪个说法最准确描述了这段代码的功能？`grouped['WoE']np.log((grouped['good'total_good)/(grouped['bad']total_bad))`  
    A、用于连续型变量的降维  
    B、将非数值变量转换为数值变量  
    C、对变量进行中心标准化处理  
    D、对变量进行等深分箱处理

    正确答案：B



## 考点: 表拼接

- 内容:
    1. 内连接(Inner join)
    2. 外连接(Outer join)
        1. 左连接(Left join)
        2. 右连接(Right join)
        3. 全连接(Full join)

- 题目: 

    - 🟢(单选题)在数据整合阶段，经常需要将多张表的数据组合在一起进行更全面的分析工作。关于表的拼接描述正确的是()。  
        A、内连接指查询结果包括两张表中左表的全部取值  
        B、外连接指的是左连接和右连接  
        C、外连接指的是全连接  
        D、外连接包括左连接、右连接和全连接

        答案:D 

## 考点: 数据形态

- 🟢(单选题)以下方法可以改变数据分布偏态的是()。  
    A、对数据做归一化处理  
    B、对数据做z-score标准化  
    C、对数据取对数  
    D、以上都是

    答案:C 

- 🟡(单选题)在进行回归分析时，哪种方法经常被用于调整连续型变量的分布形态？  
    A、百分位秩  
    B、Tukey.正态分布打分  
    C、变量取自然对数  
    D、中心标准化处理

    正确答案：C,解析：在回归分析中，取自然对数是常用的方法，因为它可以将右偏的分布转换为更接近正态分布的状态。

- 🟡(单选题)连续型变量分布形态调整的第一种方法是百分位秩。这种方法的特点是什么？  
    A、对变量取自然对数  
    B、把变量转换为正态分布  
    C、把变量从小到大排列，然后依次赋予序列号  
    D、对变量进行中心标准化处理

    正确答案：C,解析：百分位秩是一种数据排列方法，它涉及将变量从小到大排序并赋子每个值一个序列号。

### 考点: 实操

- 🟢(单选题)对于执行`edu_class`变量数据编码和缺失值填充的代码，以下那个Python代码片段不能正确实现所提供的操作？  
    A、`data_raw['gender].replace({'Male':1,'Female":0})`  
    B、`data_raw['edu_class'].map(lambda x:label.index(x)if x in label else len(label))`  
    C、`data_raw['edu_class']data_raw['edu_class'].apply(lambda x:label.index(x)if pd.notnull(x) else len(label))`  
    D、`data_raw['edu_class']data_raw['edu_class'].apply(lambda x:label.index(x) if x in label else -1)`

    正确答案：A, A选项错误，因为虽然replace可以用于数据编码，但是这里的replace方法并未处理缺失值，且题干中未提及genders变量的缺失值处理，因此不符合题干要求的对edu class变星同时进行数据编码和缺失值填充的操作。



- 🟢(单选题)给定下面的Python代码片段，那个选项正确描述了代码可能存在的问题？

    ```
    from scipy import stats
    #返回异常值的索引
    z stats.zscore(data_raw['Age])
    zoutlier =(z 3)(Z <-3)
    z_outlier.tolist().index(1)
    ```

    A、代码将返回数据集Age列中第一个异常值的索引。  
    B、当Age列中没有任何异常值时，代码将抛出一个错误。  
    C、代码能够返回所有异常值的索引。  
    D、此代码段在使用分位数来识别和处理异常值  

    正确答案：B, 解析：选项可能不正确，因为代码尝试返回第一个异常值的索引，但这仅在存在至少一个异常值时才是有效的。选项B是正确的，如果列表中没有任何值是TUe(即没有值超出3倍的标准差),则index(1)会抛出一个ValueError,因为它找不到值为1(对应于True)的元素。选项C不正确，因为。idex0☒函数只返回列表中第一个匹配项的索引。因此，如果存在多个异常值，代码只会返回第一个异常值的索引。



- 🟢(多选题)现有名为d的数据框，若想要将其中列名为A和B的列删除，则下列方法可行的是（）  
    A、`df.drop(['A'.'B])`  
    B、`df.drop(columns=['A,'B'])`  
    C、`df.drop(['A,'B],axis=0)`  
    D、`df.drop(['A,'B'],axis=1)`

    正确答案：BD


- 🟢(多选题)多元线性回归是在简单线性回归的基础上，增加更多的自变量，在构建多元线性回归时需对分类型变量进行特征变换，比如对学历我们可以做哑变量处理，以下代码可以将`data_raw['edu class]`转换成哑变量的是（）注：pd表示pandas  
    A、`pd.get_dummies(data_raw['edu class'],prefix='edu').iloc[:,1:]`  
    B、`pd.get_dummies(data_raw['edu class'],prefix='edu')`  
    C、`pd.get_dummies(data_raw['edu class'],prefix='edu').iloc[:,:-1]`  
    D、`pd.get_dummies(data_raw['edu class'].prefix='edu').iloc[:,0:]`  

    正确答案：A,C,页码233。本题主要考察特征处理时哑变量与独热编码的区别。哑变量就是在独热编码的基础上减少一列即可，pd.get_dummies可以将数据转换为独热编码，AC是在独热编码基础上减少了一列，因此是转换为哑变量，BD结果一样得到的是独热编码。因此题目选AC















