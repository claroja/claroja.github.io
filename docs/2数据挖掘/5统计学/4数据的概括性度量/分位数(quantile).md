
# 分位数(quantile)

把所有数值由小到大排列并分成n等份，处于n-1个分割点位置的数值就是n分位数。比如将数据分为4等分, 将产生3个分位点.




## 计算四分位数

假设数列一共有n个数

- 当$\frac{n+1}{4}$可以整除时，

    - Q1第在$\frac{n+1}{4}*1$位 
    - Q2第$\frac{n+1}{4}*2$位
    - Q3第$\frac{n+1}{4}*3$位

    如, 数列`[1,2,3,4,5,6,7]`:
    - Q1在第$\frac{7+1}{4}*1=2$位，该位对应的数值是2, 就是上四分位数为2, 即Q1=2
    - Q2在第$\frac{7+1}{4}*2=4$位，该位对应的数值是4, 就是中四分位数为4, 即Q2=4
    - Q3在第$\frac{7+1}{4}*3=6$位，该位对应的数值是6, 就是中四分位数为6, 即Q3=6

- 当$\frac{n+1}{4}$不能被整除

    如, 数列`[1,2,3,4,5,6,7,8]`:

    - Q1在$\frac{8+1}{4}*1=2.25$, 介于第2和第3位之间，但是更靠近第二位。所以第二位数权重占75%，第三位数权重占25%。$Q1=(2*0.75+3*0.25)=2.25$, 即上四分位数为2.25, Q1=2.25
    - Q2在$\frac{8+1}{4}*2=4.5$位，即第4和第5位的平均数，即中四分位数为2.25, Q2=4.5
    - Q3在$\frac{8+1}{4}*3=6.75$，在第6位和第7位之间，更靠近第7位。所以第7位权重75%，第6位权重25%。$Q3=(7*0.75+6*0.25)=6.75$



## 参考
- [](https://zhuanlan.zhihu.com/p/235345817)