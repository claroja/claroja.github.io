# List

## 最佳实践

### 考察问

1. 消费队列
    1. 生产者使用`()`将消息插入到队列的头部，如果key不存在则会创建一个空的队列再插入消息。✨给001可以保证幂等性
    2. 消费者使用`()`依次读取队列的消息，先进先出。
        1. 阻塞读取, 提升`()`
        2. 进行备份, 提升`()`

    ✨Stream满足List的功能时, 还支持`()`形式的消息读取。

### 考察点

1. 消费队列
    1. 生产者使用`LPUSH mq "001:99"`将消息插入到队列的头部，如果key不存在则会创建一个空的队列再插入消息。✨给001可以保证幂等性
    2. 消费者使用`BRPOPLPUSH key`依次读取队列的消息，先进先出。
        1. 阻塞读取, 提升`性能`
        2. 进行备份, 提升`可靠性`

    ✨Stream满足List的功能时, 还支持`消费组`形式的消息读取。  

## 概念

List 列表是简单的字符串双向列表，按照插入顺序排序。列表的最大长度为 2^32 - 1，也即每个列表支持超过 40 亿个元素。  

## 原理

List 类型的底层数据结构是由双端链表或压缩列表实现的：

## 常用命令

- 左侧插入: `LPUSH key element [element ...]`
- 左侧移除: `LPOP key [count]` ✨阻塞形式`BRPOP key [key ...] timeout`
- 右侧插入: `RPUSH key element [element ...]`
- 右侧移除: `RPOP key [count]` ✨阻塞形式`BLPOP key [key ...] timeout`
- 查询元素: `LRANGE key start stop`

## 常用场景

常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。

### 消息队列

1. 生产者使用`LPUSH mq "001:99"`将消息插入到队列的头部，如果key不存在则会创建一个空的队列再插入消息。✨给001可以保证幂等性
2. 消费者使用`BRPOPLPUSH key`依次读取队列的消息，先进先出。
    1. 阻塞读取, 提升`性能`
    2. 进行备份, 提升`可靠性`

✨Stream满足List的功能时, 还支持「消费组」形式的消息读取。  

## 参考

- <https://cloud.tencent.com/developer/article/2320410>
